RewriteEngine On

# Обработка /menu без .php
RewriteRule ^menu$ menu.php [L]

# Обработка /menu2 без .php
RewriteRule ^menu2$ menu2.php [L]

# Обработка API
RewriteRule ^api/language/change$ api/language/change.php [L]

# Проксирование API запросов на Node.js backend
RewriteCond %{REQUEST_URI} ^/api/poster/.*$
RewriteRule ^api/poster/(.*)$ http://localhost:3002/api/poster/$1 [P,L]

# Проксирование других API запросов на Node.js backend
RewriteCond %{REQUEST_URI} ^/api/menu/.*$
RewriteRule ^api/menu/(.*)$ http://localhost:3002/api/menu/$1 [P,L]

RewriteCond %{REQUEST_URI} ^/api/cache/.*$
RewriteRule ^api/cache/(.*)$ http://localhost:3002/api/cache/$1 [P,L]

RewriteCond %{REQUEST_URI} ^/api/tables/.*$
RewriteRule ^api/tables/(.*)$ http://localhost:3002/api/tables/$1 [P,L]

# Обработка /admin без .php
RewriteRule ^admin$ admin/index.php [L]
RewriteRule ^admin/$ admin/index.php [L]

# Обработка разделов админки (4 основных раздела)
RewriteRule ^admin/pages$ admin/pages/index.php [L]
RewriteRule ^admin/pages/$ admin/pages/index.php [L]
RewriteRule ^admin/users$ admin/users/index.php [L]
RewriteRule ^admin/users/$ admin/users/index.php [L]
RewriteRule ^admin/database$ admin/database/index.php [L]
RewriteRule ^admin/database/$ admin/database/index.php [L]

# Компоненты (доступны через главную страницу)
RewriteRule ^admin/sepay$ admin/sepay/index.php [L]
RewriteRule ^admin/sepay/$ admin/sepay/index.php [L]
RewriteRule ^admin/logs$ admin/logs/index.php [L]
RewriteRule ^admin/logs/$ admin/logs/index.php [L]
RewriteRule ^admin/images$ admin/images/index.php [L]
RewriteRule ^admin/images/$ admin/images/index.php [L]
RewriteRule ^admin/settings$ admin/settings/index.php [L]
RewriteRule ^admin/settings/$ admin/settings/index.php [L]